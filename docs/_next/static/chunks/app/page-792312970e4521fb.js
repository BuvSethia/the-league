(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{803:function(){},9081:function(e,t,a){Promise.resolve().then(a.bind(a,8119))},8119:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var n=a(7437),s=a(2265),i=a(2040),r=a.n(i);function d(){let[e,t]=(0,s.useState)(null);(0,s.useEffect)(()=>{r()({locateFile:e=>"https://sql.js.org/dist/".concat(e)}).then(async e=>{let a=await fetch("/db.sqlite").then(e=>e.arrayBuffer());t(new e.Database(new Uint8Array(a)))})},[]);let a=(0,s.useCallback)(t=>{if(!e)return console.error("Database not initialized!"),null;try{let a=e.prepare(t),n=[];for(;a.step();)n.push(a.getAsObject());return a.free(),n}catch(e){return console.error("Error executing query:",e),null}},[e]);return{db:e,executeQuery:a}}var m=function(e){let{tournamentId:t}=e,{executeQuery:a}=d(),[i,r]=(0,s.useState)(null),[m,l]=(0,s.useState)([]);return((0,s.useEffect)(()=>{(async()=>{try{let[e,n]=await Promise.all([a("SELECT id, name, location, start_date, end_date \n                                  FROM tournaments \n                                  WHERE id = ".concat(t)),a("SELECT \n        teams.id AS team_id,\n        teams.name AS team_name,\n        COUNT(CASE WHEN games.winning_team_id = teams.id AND games.game_type_id = 1 THEN 1 END) AS wins_rs,\n        COUNT(CASE WHEN games.winning_team_id = teams.id AND games.game_type_id = 2 THEN 1 END) AS wins_finals,\n        (COUNT(CASE WHEN ((games.team1_id = teams.id OR games.team2_id = teams.id) AND games.game_type_id = 1) THEN 1 END) \n            - COUNT(CASE WHEN games.winning_team_id = teams.id AND games.game_type_id = 1 THEN 1 END) \n            - COUNT(CASE WHEN games.winning_team_id IS NULL AND games.game_type_id = 1 THEN 1 END)) AS losses_rs,\n            (COUNT(CASE WHEN ((games.team1_id = teams.id OR games.team2_id = teams.id) AND games.game_type_id = 2) THEN 1 END) \n            - COUNT(CASE WHEN games.winning_team_id = teams.id AND games.game_type_id = 2 THEN 1 END) \n            - COUNT(CASE WHEN games.winning_team_id IS NULL AND games.game_type_id = 2 THEN 1 END)) AS losses_finals\n    FROM \n        teams\n    JOIN \n        tournament_teams ON teams.id = tournament_teams.team_id\n    JOIN \n        games ON (tournament_teams.tournament_id = games.tournament_id AND (games.team1_id = teams.id OR games.team2_id = teams.id))\n    WHERE \n        (games.game_type_id = 1 OR games.game_type_id = 2)\n        AND tournament_teams.tournament_id = '".concat(t,"'\n    GROUP BY \n        teams.id, teams.name"))]);e&&e.length>0&&r(e[0]),n&&l(n)}catch(e){console.error("Error fetching tournament info:",e)}})()},[a,t]),i)?(0,n.jsxs)("div",{className:"container mx-auto p-4",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4",children:i.name}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Location:"})," ",i.location]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Date:"})," ",i.start_date,i.start_date!==i.end_date&&" - ".concat(i.end_date)]}),(0,n.jsx)("h3",{className:"text-xl font-semibold mt-4",children:"Participating Teams"}),(0,n.jsxs)("table",{className:"border-collapse border border-white-800 mt-2",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"border border-white-800 p-2",children:"Standing"}),(0,n.jsx)("th",{className:"border border-white-800 p-2",children:"Team"}),(0,n.jsx)("th",{className:"border border-white-800 p-2",children:"Record"})]})}),(0,n.jsx)("tbody",{children:m.map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"border border-white-800 p-2",children:e.placement}),(0,n.jsx)("td",{className:"border border-white-800 p-2",children:e.team_name}),(0,n.jsxs)("td",{className:"border border-white-800 p-2",children:["Group: ",e.wins_rs,"-",e.losses_rs,e.wins_finals+e.losses_finals>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),"Finals: ",e.wins_finals,"-",e.losses_finals]}):null]})]},t))})]})]}):(0,n.jsx)("div",{children:"Loading..."})};function l(){let{executeQuery:e}=d(),[t,a]=(0,s.useState)([]),[i,r]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{let t=await e("SELECT id, name FROM tournaments ORDER BY start_date DESC");t&&(a(t),t.length>0&&r(t[0].id))})()},[e]),(0,n.jsxs)("div",{className:"container mx-auto p-4",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"The League"}),(0,n.jsxs)("div",{className:"flex items-center mb-4",children:[(0,n.jsx)("label",{className:"mr-2",children:"Choose a tournament:"}),(0,n.jsxs)("select",{className:"border border-white bg-black text-white rounded p-2 h-10 w-60",value:i||"",onChange:e=>{r(Number(e.target.value))},children:[(0,n.jsx)("option",{value:"",disabled:!0,hidden:!0,children:i?"Select a tournament":"Loading tournaments..."}),t.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),i&&(0,n.jsx)(m,{tournamentId:i})]})}}},function(e){e.O(0,[218,128,971,23,744],function(){return e(e.s=9081)}),_N_E=e.O()}]);